# 硬件

智能家居产品：

* 米家系列。
* HomeKit 系列。

亚马逊Echo

Google Home


它的额定电压与使用材料有关，
蓝色InGaN/GaN2.5V，
绿色GaP1.8V，
红色GaP1.8V，
黄色GaAs1V，
白色InGaN+2.5V。当然还有材料一样，发光颜色不一样，比如绿色也有使用InGaN材料的，它的电压就是2.5V。另外高亮二极管又与这些发光管不一样，电压在3.3V左右（它主要是控制它流过的电流）。

绿色 3V 会烧毁

## 3mm LED

红色 1.5V可以发光
黄色 1.5V光线很暗 
蓝色 1.5V不能发光
绿色 1.5V不能发光 3V烧毁
白色 1.5V不能发光

普通的发光二极管正偏压降红色为1.6V，黄色为1.4V左右，蓝 白 为至少2.5V 。工作电流5－10mA左右


## 5mm

白色 3V 可以发光




## 米家硬件

米家无线开关
电池CR2030

### 智能插座

智能插座经常搭配非智能家电使用，使其变成半智能家电

电量统计、定时、倒计时

小米官网有三种版本的智能插座，分别是基础版（WiFi版）、增强版（WiFi+USB接口版）、Zigbee版（采用类似蓝牙的短距离、低功耗无线通信技术，对比WiFi来说，更像是一种“机密部队的内部通讯手段”，更加安全）。


但是，Zigbee版必须捆绑小米的智能网关一起使用。而基础版和增强版连接家用WiFi即可，当智能插座和手机处于相同WiFi之中，即可用手机控制插座的通断电。

可以用无线开关代替手机关灯。无线开关也必须捆绑网关使用（因为保密条约，只能在小米的智能设备之间通信）。




## 小米智能家居 实现技术


门窗传感器：

* Ziggbee
* 干簧管
* 天线
* 复位按键
* 永久磁铁
* 纽扣电池


硬件开发选型

* 

小米智能家居以小米多功能网关为中心，搭配门窗传感器、人体传感器和无线开关。其中门窗传感器可以配合智能灯泡、空气净化器等设备，完成进门自动开灯、关窗后自动开启空气净化器等功能。人体传感器可以和多功能网关配合，用户检测宠物出门情况，用户下床自动开灯等。而无线开关和小米智能插座配合，则可以实现一键关闭家中所有插电设备。

ARM微处理器

* 体积小
* 功耗低

这套智能设备应该是基于来设计的嵌入式处理器。首先，小米的智能家居能保持长时间的运作而无需充电，因此需要低功耗的处理器来延长使用时间。


其中门窗传感器、无线开关和人体传感器分别使用了CR1632、CR2032和CR2450型号的电池，电压均为3V，标准环境下寿命均大于2年，而且电池均可更换。




CR纽扣电池价格8-12（5粒）

ARM微处理器有哪些芯片？


在传感方面，设备中现在拥有感应门窗开关和人体活动的两种传感器。 
门窗传感器由传感器主体和磁铁组成，而两部分分别位于门窗可开关部分和固定的门框和窗框上，两部分之间的有效监测距离为12mm。当门窗被开启或者关闭，触发组建中的磁敏元件监测到传感器主体与磁铁的靠近和分开，发送开或者关到信号到智能网关以及与小米智能网关相连的移动智能终端设备上


人体传感器由热释电红外传感器、菲涅尔透镜和zigbee模块组成，能够探测7米距离、约170度角度范围内人和宠物的移动，完成自动探测、自动提醒的智能功能。其中热释电红外传感器能够接受到人体发射出来的9~10μm的红外线信号，将信号转换为电压信号来判断是否有人经过，再通过ZigBee模块向网关传输探测到的信息。在检测距离方面，菲涅尔透镜利用透镜特殊光学原理，当有人从透镜前经过时将接收到的有效范围内的红外信号以忽强忽弱的脉冲形式输入，从而增强它的能量幅度，更好地被红外传感器所检测；而在探测角度上，菲涅尔透镜可以探测窗口正前方以及正前下方区域，左右探测角度达到170度，可以覆盖一般家庭居所范围。菲涅尔透镜拥有较高的透光率，能够较好地过滤出9~10μm的人体红外线中心波长，在冷热环境下均保持稳定性，因此能很好地配合热释电红外传感器，保证设备的正常检测效果。

在通信方面，小米智能家居应用了基于NXP的一颗工业级ZigBee射频芯片—JN5168进行组网通讯。

ZigBee是基于IEEE802.15.4标准的低功耗局域网协议，具有短距离、低功耗、低速率、低成本低等特点。首先，能耗特性是ZigBee的一个技术优势，通常ZigBee节点所承载的应用数据速率都比较低。在不需要通信时，节点可以进入很低功耗的休眠状态，此时能耗可能只有正常工作状态下的千分之一。在一般情况下，休眠时间占总运行时间的大部分，有时正常工作的时间还不到百分之一，因此达到很高的节能效果。其次，ZigBee的响应速度较快，一般从睡眠转入工作状态只需15ms，节点连接进入网络只需30ms，进一步节省了电能，而且也能满足智能家居实时检测快速启动相应功能的效果。ZigBee还拥有大规模的组网能力，在网络中较多设备时更有优势。

但通信方面使用ZigBee技术有一个问题，由于多功能网关通过ZigBee在智能设备之间相互传递，而通过wifi接入到小米云其他智能设备，但ZigBee和wifi工作的频谱是互相冲突的，由于wifi节点在获取信道方面的绝对优势，ZigBee受wifi干扰导致的网络丢包率高达50%。为了解决这个问题，可以引入多通道ZigBee通讯机制算法。首先，通过ZigBee的信道空闲评估机制，启动干扰检测，若干扰评估认为周围Wi-Fi干扰达到一定程度，将对链路性能造成加大影响，则进行信道切换。 

嵌入式系统


②门窗传感器的检测原理是什么？

小米的门窗传感器，其实从原理上又可以叫无线门磁传感器。门磁传感器是由无线发射模块和磁块两部份组成，在无线发射模块有两个箭头处有一个“钢簧管”的元器件，当磁体与钢簧管的距离保持在一定距离内时，钢簧管处于断开状态，一旦磁体与钢簧管分离的距离超过特定距离时，钢簧管就会闭合，造成短路，报警指示灯亮的同时向主机发射报警信号。而小米门磁传感器大个的带指示灯的就是无线发射模块，小个的就是磁块了。








